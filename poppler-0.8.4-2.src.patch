diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x '*.stamp' -x '*.html' -x '*.bak' -x '*.sgml' -x '*.tmpl' -x '*.txt' -x '*.xml' -x '*.args' -x '*.devhelp*' -x '*.css' -x '*.hierarchy' -x '*.interfaces' -x '*.prerequisites' -x '*.signals' -x '*.png' -x '*.top' -x '*.bottom' -x gtk-doc.make -x gtk-doc.m4 -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x poppler-config.h origsrc/poppler-0.8.4/configure.ac src/poppler-0.8.4/configure.ac
--- origsrc/poppler-0.8.4/configure.ac	2008-06-28 10:17:09.000000000 -0500
+++ src/poppler-0.8.4/configure.ac	2008-07-08 04:15:45.281250000 -0500
@@ -27,6 +27,9 @@
 win32_libs=""
 create_shared_lib=""
 case "$host_os" in
+  cygwin*)
+    create_shared_lib="-no-undefined"
+  ;;
   mingw|mingw32)
     win32_libs="-lgdi32"
     create_shared_lib="-no-undefined"
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x '*.stamp' -x '*.html' -x '*.bak' -x '*.sgml' -x '*.tmpl' -x '*.txt' -x '*.xml' -x '*.args' -x '*.devhelp*' -x '*.css' -x '*.hierarchy' -x '*.interfaces' -x '*.prerequisites' -x '*.signals' -x '*.png' -x '*.top' -x '*.bottom' -x gtk-doc.make -x gtk-doc.m4 -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x poppler-config.h origsrc/poppler-0.8.4/glib/Makefile.am src/poppler-0.8.4/glib/Makefile.am
--- origsrc/poppler-0.8.4/glib/Makefile.am	2008-03-26 14:38:52.000000000 -0500
+++ src/poppler-0.8.4/glib/Makefile.am	2008-07-08 04:15:45.296875000 -0500
@@ -94,7 +94,7 @@
 	$(FONTCONFIG_LIBS)				\
 	$(cairo_libs)
 
-libpoppler_glib_la_LDFLAGS = -version-info 3:0:0
+libpoppler_glib_la_LDFLAGS = -version-info 3:0:0 @create_shared_lib@
 
 if BUILD_WITH_GDK
 noinst_PROGRAMS = test-poppler-glib
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x '*.stamp' -x '*.html' -x '*.bak' -x '*.sgml' -x '*.tmpl' -x '*.txt' -x '*.xml' -x '*.args' -x '*.devhelp*' -x '*.css' -x '*.hierarchy' -x '*.interfaces' -x '*.prerequisites' -x '*.signals' -x '*.png' -x '*.top' -x '*.bottom' -x gtk-doc.make -x gtk-doc.m4 -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x poppler-config.h origsrc/poppler-0.8.4/m4/qt.m4 src/poppler-0.8.4/m4/qt.m4
--- origsrc/poppler-0.8.4/m4/qt.m4	2008-03-26 14:38:52.000000000 -0500
+++ src/poppler-0.8.4/m4/qt.m4	2008-07-08 04:15:45.312500000 -0500
@@ -69,7 +69,7 @@
     save_CXXFLAGS=$CXXFLAGS
     save_LIBS=$LIBS
     CXXFLAGS="$CXXFLAGS -I$qt_incdir"
-    LIBS="$LIBS $qt_libdir/$qt_test_library"
+    LIBS="$LIBS -L$qt_libdir -lqt-mt"
     AC_MSG_CHECKING([if Qt needs -pthread])
     AC_TRY_LINK([#include <qt.h>], [QString s;], [pthread_needed=no], [pthread_needed=yes])
     if test "x$pthread_needed" = "xyes"; then
@@ -89,7 +89,7 @@
     fi
 
     $1[]_CXXFLAGS="-I$qt_incdir"
-    $1[]_LIBS="$qtpthread $qt_libdir/$qt_test_library"
+    $1[]_LIBS="$qtpthread -L$qt_libdir -lqt-mt"
     ifelse([$2], , :, [$2])
 else
     ifelse([$3], , [AC_MSG_FAILURE(dnl
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x '*.stamp' -x '*.html' -x '*.bak' -x '*.sgml' -x '*.tmpl' -x '*.txt' -x '*.xml' -x '*.args' -x '*.devhelp*' -x '*.css' -x '*.hierarchy' -x '*.interfaces' -x '*.prerequisites' -x '*.signals' -x '*.png' -x '*.top' -x '*.bottom' -x gtk-doc.make -x gtk-doc.m4 -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x poppler-config.h origsrc/poppler-0.8.4/poppler/CairoOutputDev.cc src/poppler-0.8.4/poppler/CairoOutputDev.cc
--- origsrc/poppler-0.8.4/poppler/CairoOutputDev.cc	2008-06-28 10:11:01.000000000 -0500
+++ src/poppler-0.8.4/poppler/CairoOutputDev.cc	2008-07-08 04:15:45.312500000 -0500
@@ -802,7 +802,9 @@
   popTransparencyGroup();
 }
 
+#ifndef __CYGWIN__
 typedef unsigned int uint32_t;
+#endif
 
 static uint32_t luminocity(uint32_t x)
 {
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x '*.stamp' -x '*.html' -x '*.bak' -x '*.sgml' -x '*.tmpl' -x '*.txt' -x '*.xml' -x '*.args' -x '*.devhelp*' -x '*.css' -x '*.hierarchy' -x '*.interfaces' -x '*.prerequisites' -x '*.signals' -x '*.png' -x '*.top' -x '*.bottom' -x gtk-doc.make -x gtk-doc.m4 -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x poppler-config.h origsrc/poppler-0.8.4/qt/Makefile.am src/poppler-0.8.4/qt/Makefile.am
--- origsrc/poppler-0.8.4/qt/Makefile.am	2008-03-26 14:38:52.000000000 -0500
+++ src/poppler-0.8.4/qt/Makefile.am	2008-07-08 04:15:45.328125000 -0500
@@ -29,7 +29,7 @@
 	$(FREETYPE_LIBS)			\
 	$(FONTCONFIG_LIBS)
 
-libpoppler_qt_la_LDFLAGS = -version-info 2:0:0
+libpoppler_qt_la_LDFLAGS = -version-info 2:0:0 @create_shared_lib@
 
 if BUILD_SPLASH_OUTPUT
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x '*.stamp' -x '*.html' -x '*.bak' -x '*.sgml' -x '*.tmpl' -x '*.txt' -x '*.xml' -x '*.args' -x '*.devhelp*' -x '*.css' -x '*.hierarchy' -x '*.interfaces' -x '*.prerequisites' -x '*.signals' -x '*.png' -x '*.top' -x '*.bottom' -x gtk-doc.make -x gtk-doc.m4 -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x poppler-config.h origsrc/poppler-0.8.4/qt4/src/Makefile.am src/poppler-0.8.4/qt4/src/Makefile.am
--- origsrc/poppler-0.8.4/qt4/src/Makefile.am	2008-06-08 16:41:11.000000000 -0500
+++ src/poppler-0.8.4/qt4/src/Makefile.am	2008-07-08 04:15:45.343750000 -0500
@@ -59,7 +59,7 @@
 	$(top_builddir)/poppler/libpoppler-arthur.la
 endif
 
-libpoppler_qt4_la_LDFLAGS = -version-info 3:0:0
+libpoppler_qt4_la_LDFLAGS = -version-info 3:0:0 @create_shared_lib@
 
 # This rule lets GNU make create any *.moc from the equivalent *.h
 .h.moc:
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x '*.stamp' -x '*.html' -x '*.bak' -x '*.sgml' -x '*.tmpl' -x '*.txt' -x '*.xml' -x '*.args' -x '*.devhelp*' -x '*.css' -x '*.hierarchy' -x '*.interfaces' -x '*.prerequisites' -x '*.signals' -x '*.png' -x '*.top' -x '*.bottom' -x gtk-doc.make -x gtk-doc.m4 -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x poppler-config.h origsrc/poppler-0.8.4/test/Makefile.am src/poppler-0.8.4/test/Makefile.am
--- origsrc/poppler-0.8.4/test/Makefile.am	2008-03-26 14:38:52.000000000 -0500
+++ src/poppler-0.8.4/test/Makefile.am	2008-07-08 04:15:45.359375000 -0500
@@ -68,8 +68,8 @@
        pdf-inspector.cc
 
 pdf_inspector_LDADD =					\
-	$(top_builddir)/poppler/libpoppler.la		\
 	$(top_builddir)/poppler/libpoppler-cairo.la	\
+	$(top_builddir)/poppler/libpoppler.la		\
 	$(CAIRO_LIBS)					\
 	$(FREETYPE_LIBS)				\
 	$(GTK_TEST_LIBS)
